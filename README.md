# chromasync
`chromasync` takes an 18-colors color palette and generates themes for
various CLI tools, to make themes consistent between applications.

> NOTE: `chromasync` is still under development. I still have to do
> all the testing and clean the code!
> If you find any bug, just let me know. Any help is much appreciated



## Installation
```bash
git clone https://github.com/danieleln/chroma-sync.git
cd chroma-sync
pip install .
chromasync -h
```



## chromasync Directories
```
$HOME
│
├── .config/chromasync/
│    │
│    ├── chromasync-post.sh
│    │
│    ├── palettes/ 
│    │
│    └── templates/
│
└── .cache/chromasync/
     │
     ├── chromasync.log
     │
     └── out/ 
```

Where:

- `chromasync-post.sh` is a shell script that is executed every
  time after chromasync finishes to run. It's useful to make other
  application to reload the theme (such as kitty, fish)
- `palettes/` contains palette files (regular `.conf` files). See section
  [Palette Files](#palette-files).
- `templates/` contains config templates for the CLI tools that
  you need. See section [Template Files](#template-files).
- `out/` contains specialized templates generated by `chromasync`
- `chromasync.log` is a log file generated by `chromasync`



## Usage
```bash
# Loads a palette either from the filesystem (by specifying a path) or
# from '~/.config/chromasync/palettes'. In the latter case, file
# extension might be omitted.
# --light/--dark variant can be omitted if the palette has only one of
# them
chromasync load "/path/to/palette.conf" --dark/--light
chromasync load "palette.conf" --dark/--light
chromasync load "palette" --dark/--light

# Reloads a previously loaded palette. Useful when making changes to
# one or more templates
chromasync reload

# Lists palettes in ~/.config/chromasync/palettes/
# The --dark/--light modifiers make chromasync to list only dark/light
# palettes. The distinction is done simply by checking whether the
# palette file name contains the string light/dark
chromasync list --palette
chromasync list --palette --dark
chromasync list --palette --light

# Lists templates in ~/.config/chromasync/templates/
chromasync list --template

# For more infos:
chromasync --help
chromasync list --help
chromasync load --help
chromasync reload --help
```

At the moment, templates and palettes must be manually placed in the 
respective folders.




## Palette Files
Palette files contains the 18 colors used to theme the terminal (one
background color, one foreground color, 8 normal colors and 8 highlight
colors).

> NOTE: *highlight* colors are usually called *bright* colors. However,
> those colors might also be *darker* than normal colors (mostly true
> in light palettes). For this reason, I decided to refer to them as
> *highlight* colors.

A single palette file can contain both the `light` and the `dark`
variant.

Palette files should look like this:
```conf
# one-half-dark.conf
[Dark]
# Background and foreground colors
BG=#282c34
FG=#dcdfe4

# Normal colors
BLK=#282c34
RED=#e06c75
GRN=#98c379
YLW=#e5c07b
BLU=#61afef
MAG=#c678dd
CYN=#56b6c2
WHT=#dcdfe4

# Highlight colors
BLKH=#5d677a
REDH=#e06c75
GRNH=#98c379
YLWH=#e5c07b
BLUH=#61afef
MAGH=#c678dd
CYNH=#56b6c2
WHTH=#dcdfe4


[Light]
# Redefine all of the colors for the light variant
```
Note that at least one of `[Light]`, `[Dark]` section headers must be
defined and all colors must be present under both headers.



## Template Files
Template files don't have a general standard to follow, since they
depends on the particular application.
They just contain placeholders for chromasync to know where to place
colors and which color to place.

A simple template file might look something like this:
```conf
@fmt: hex
@out: ~/.config/my-app/my-app.conf

# template file for application my-app
background_color={BG}
foreground_color={FG}
important_text_color={RED}
inactive_text_color={FG:70:BG}
```

### Basic Colors Placeholders
Colors can be specified with `{COLOR_NAME}` where `COLOR_NAME` must be:

- one of the 18 colors defined in the palette (`BG`, `FG`, `RED`, `REDH`, etc.)
- one of `OS1`, `OS2`, `OS1H`, `OS2H`. This are Operating-System specific
  colors: they're still extracted from the 18 previous colors, but they
  change between distros.

  For example, on Ubuntu `OS1` is `RED`, while on Arch `OS1` is `CYN`.
  `OS1H` is the highlighted counterpart of `OS1`; so, it will be `REDH`
  on Ubuntu and `CYNH` on Arch.

  These colors are extracted from `neofetch` logo colors.


  > NOTE: at the moment, OS colors are defined just for a couple of 
  > distros, like Arch, Debian, EndeavourOS, Manjaro, PopOS and Ubuntu.
  > Plus, I tested them only on Ubuntu and EndeavourOS.
  > Feel free to add other distros and test them out. OS color are
  > defined in `chromasync/actions/load/color/os_colors.py`


### Composite Colors Placeholders
`chromasync` can also blends between two colors. For example `{FG:70:BG}`
means a mixture of 70% `FG` and 30% `BG`. Any of the basic colors can
be used to generate a composite color.

Composite colors are particularly useful when dealing with both light
and dark themes.
As an example, the color `{WHT}` has a good contrast on dark themes,
but a poor contrast in light themes.
On the other hand, the color `{FG:70:BG}` works regardless of the theme.


### Directives
Additionally, `chromasync` looks for some directives inside the template
file. There are two types of directives:

- format directive `@fmt:`. It determines how colors are replaced in
  the template. There are two available formats right now:
    - `@fmt: #hex` : `{RED}` -> `#ff0000`
    - `@fmt: hex`  : `{RED}` -> `ff0000`
- output directive `@out:`. It determines where to save the generated
  scheme. If not specified, it's saved in `~/.cache/chromasync/out/`
